<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <div class="profile-top-bar">
        <div class="back-button">
            <img src="{{ url_for('static', filename='images/back.png') }}" alt="Kembali">
        </div>
        <div class="profile-top-info">
            <h1>{{ user[1] }}</h1>
            <span class="post-count">{{ post_count }} posts</span>
        </div>
    </div>

    <div class="cover-photo"></div>

    <div class="profile-header">
        <div class="profile-picture">
            <img src="{{ url_for('static', filename='images/laura1.jpg') }}" alt="Profile Picture">
        </div>
        <button class="edit-profile-btn" id="editProfileBtn">Edit profile</button>
    </div>

    <div class="profile-info">
        <h2>{{ user[1] }}</h2>
        <div class="username">@{{ user[2] }}</div>
        <div class="bio">{{ user[3] }}</div>
        <div class="follow-stats">
            <a href="/following" class="following-link">{{ following_count }} Following</a>
            <span>{{ follower_count }} Followers</span>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active">Posts</div>
        <div class="tab">Reply</div>
        <div class="tab">Highlight</div>
        <div class="tab">Article</div>
        <div class="tab">Media</div>
        <div class="tab">Like</div>
    </div>

    {% for post in posts %}
    <div class="post">
        <div class="post-header">
            <div class="post-profile-pic">
                <img src="{{ url_for('static', filename='images/laura1.jpg') }}" alt="Profile Picture">
            </div>
            <div class="post-profile-info">
                <span class="post-user">{{ post[0] }}</span>
                <span class="post-username">@{{ post[1] }}</span>
                <span> Â· </span>
            </div>
        </div>
        <div class="post-content">
            {{ post[2] }}
        </div>
    </div>
    {% endfor %}

    <form action="{{ url_for('logout') }}" method="get" style="display: inline;">
        <button type="submit" class="logout-button">Logout</button>
    </form>

</body>

<script>

    function getCookie(name) {
        let cookies = document.cookie.split('; ');
        for (let cookie of cookies) {
            let [key, value] = cookie.split('=');
            if (key === name) return value;
        }
        return null;
    }


    window.onload = function () {
        let username = getCookie("username");
        if (username) {
            document.getElementById("display-username").textContent = username;
        }
    };
</script>
<p id="usernameDisplay"></p>

</html>